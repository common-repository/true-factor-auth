!function($){window.tfaActionsGetAction=function(a){return tfa_rules.actions.find(function(t){return+t.id==+a})},window.tfaInitShortCodes=function(t){t.find(".tfa-shortcode-action").each(function(t,a){var n=$(a),r=n.find("form"),e=n.data("action-id");r.on("submit",function(t){r.data("tf-done")||(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),tfaShow2FAPopup({id:e},function(t){tfaAddHidden(r,tfa_rules.token_key+e,t),r.data("tf-done",1),r.trigger("submit")}))})})},window.tfaInitActionTriggers=function(t){"undefined"!=typeof tfa_rules&&tfa_rules.actions.forEach(function(n){[].forEach.call(t[0].querySelectorAll(n.button_selector),function(t){var a=$(t);a.data("tfa-action-id",n.id),n.pre_callback&&a.data("tfa-pre-callback",n.pre_callback),"FORM"===a[0].tagName?(a.data("tfa-onsubmit",a.attr("onsubmit")),a.attr("onsubmit","tfaTriggerAction(event, this)")):(a.data("tfa-onclick",a.attr("onclick")),a.attr("onclick","tfaTriggerAction(event, this)"))})})},window.tfaTriggerAction=function(event,ctrl){var $ctrl=$(ctrl),pre_result;if("FORM"===$ctrl[0].tagName){if($ctrl.data("tf-done"))return void($ctrl.data("tfa-onsubmit")&&eval($ctrl.data("tfa-onsubmit")))}else if($ctrl.data("tf-done"))return void($ctrl.data("tfa-onclick")&&eval($ctrl.data("tfa-onclick")));if(event.preventDefault(),$ctrl.data("tfa-pre-callback"))try{if(eval("pre_result = "+$ctrl.data("tfa-pre-callback")),"function"==typeof pre_result&&(pre_result=pre_result()),!1===pre_result)return}catch(e){console.error(e)}var action_id=$ctrl.data("tfa-action-id");tfaShow2FAPopup({id:action_id},function(t){("FORM"===$ctrl[0].tagName?$ctrl:$ctrl.closest("form")).length&&tfaAddHidden($ctrl,tfa_rules.token_key+action_id,t,!0),$ctrl.data("tf-done",1),"FORM"===$ctrl[0].tagName?HTMLFormElement.prototype.submit.call($ctrl[0]):$ctrl.click()})},window.tfaInitCallbacks||(window.tfaInitCallbacks=[]),window.tfaInitCallbacks.push(tfaInitShortCodes),window.tfaInitCallbacks.push(tfaInitActionTriggers)}(jQuery);